{% extends 'base.html' %}

{% block title %}Create an Account - LinkUp Gadgets{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto px-4 sm:px-6 lg:px-8 my-16">
    <h1 class="text-3xl font-bold text-center text-gray-900">Create Your Account</h1>
    <p class="text-center text-gray-600 mt-2">Join the largest tech marketplace in Ghana.</p>

    <!-- Display Messages -->
    {% if messages %}
        {% for message in messages %}
            <div class="mt-4 p-4 rounded-md {% if message.tags == 'success' %} bg-green-100 text-green-800 {% else %} bg-red-100 text-red-800 {% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <form method="POST" enctype="multipart/form-data" class="mt-8 space-y-6" id="registrationForm">
        {% csrf_token %}

        <fieldset class="border-t border-b border-gray-200 py-6">
            <legend class="text-lg font-semibold text-gray-800 mb-4">User Details</legend>
            <!-- Render user form fields manually for better styling -->
            {% for field in user_form %}
                <div>
                    <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ field.label }}</label>
                    <div class="mt-1">
                        {{ field }}
                    </div>
                    {% if field.errors %}
                        <p class="text-red-500 text-xs mt-1">{{ field.errors.0 }}</p>
                    {% endif %}
                </div>
            {% endfor %}
        </fieldset>

        <div class="flex items-center">
            <input id="is_vendor_checkbox" name="is_vendor" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
            <label for="is_vendor_checkbox" class="ml-2 block text-sm text-gray-900">
                Register as a Vendor?
            </label>
        </div>

        <fieldset id="vendor_fields" class="border-b border-gray-200 py-6 space-y-6 hidden">
             <legend class="text-lg font-semibold text-gray-800 mb-4">Shop Details</legend>
             {% for field in vendor_form %}
                <div>
                    <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ field.label }}</label>
                    <div class="mt-1">
{{ field }}
                    </div>
                     {% if field.errors %}
                        <p class="text-red-500 text-xs mt-1">{{ field.errors.0 }}</p>
                    {% endif %}
                </div>
            {% endfor %}
        </fieldset>

        <div>
            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-black bg-[#FBBF24] hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500">
                Create Account
            </button>
        </div>
        <p class="text-center text-sm">Already have an account? <a href="{% url 'accounts:login' %}" class="font-medium text-indigo-600 hover:text-indigo-500">Log In</a></p>
    </form>
</div>

<!-- Simple script to show/hide vendor fields -->
<script>
    const checkbox = document.getElementById('is_vendor_checkbox');
    const vendorFields = document.getElementById('vendor_fields');
    checkbox.addEventListener('change', () => {
        vendorFields.classList.toggle('hidden');
    });
</script>

{% endblock %}